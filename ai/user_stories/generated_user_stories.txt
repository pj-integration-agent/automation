**User Story 1 – Criação de um novo banco**  
*(US01)*  

> **Como** usuário autorizado,  
> **eu quero** criar um registro de banco na aplicação,  
> **para** registrar corretamente as informações de um banco e garantir a integridade dos dados no sistema.

### Descrição
Ao clicar na opção **“Novo”**, a tela de cadastro deve ser exibida. Todos os campos abaixo são obrigatórios:

| Campo | Regras |
|-------|--------|
| **Código** | Deve ser único em relação a todos os bancos já cadastrados; não pode ser igual a um código existente. |
| **Descrição do Banco** | Texto obrigatório. |
| **Apelido** | Texto obrigatório. |
| **Número de inscrição no SBP** | Texto obrigatório. |
| **Banco Controlador** | Seleção de uma lista pre‑carregada de bancos controladores. |
| **CNPJ** | Deve ser um número de CNPJ válido e já existente no banco de dados. |

Depois de preencher os campos, o usuário clica em **“Salvar”**. O sistema valida os dados e, se tudo estiver correto, cria o registro e exibe uma mensagem de sucesso. Se houver erros, a tela mostra mensagens de erro específicas para cada campo.

### Critérios de Aceite
| # | Critério |
|---|----------|
| 1 | A tela de cadastro é exibida quando o usuário clica em “Novo”. |
| 2 | Todos os campos listados são obrigatórios e são marcados com “*”. |
| 3 | Ao tentar salvar com um código já existente, a aplicação mostra a mensagem: *“O código informado já está em uso. Por favor, informe outro.”* |
| 4 | Ao tentar salvar com um CNPJ inválido, a aplicação mostra a mensagem: *“CNPJ inválido. Por favor, informe um CNPJ válido.”* |
| 5 | Ao tentar salvar com qualquer campo obrigatório vazio, a aplicação indica o erro específico de cada campo. |
| 6 | Quando todos os dados são válidos, a aplicação cria o banco, fecha a tela de cadastro e exibe *“Banco cadastrado com sucesso.”* |
| 7 | O banco criado aparece na lista de bancos (se existir). |

### BDD – Cenários Positivos  
```
Scenario: Registro de novo banco com todos os campos válidos
  Given eu estou na tela de cadastro de bancos
  When eu preencho o campo "Código" com "BAN001"
  And eu preencho o campo "Descrição do Banco" com "Banco do Norte"
  And eu preencho o campo "Apelido" com "Norte"
  And eu preencho o campo "Número de inscrição no SBP" com "12345678"
  And eu seleciono o "Banco Controlador" com o valor "Banco Central"
  And eu preencho o campo "CNPJ" com "12.345.678/0001-95"
  And eu clico em "Salvar"
  Then devo ver a mensagem "Banco cadastrado com sucesso."
  And o banco com código "BAN001" deve aparecer na lista de bancos
```

### BDD – Cenários Negativos  
```
Scenario: Tentativa de criar banco com código duplicado
  Given eu estou na tela de cadastro de bancos
  When eu preencho o campo "Código" com "BAN001"  # código já existente
  And eu preencho os demais campos com valores válidos
  And eu clico em "Salvar"
  Then devo ver a mensagem "O código informado já está em uso. Por favor, informe outro."

Scenario: Tentativa de criar banco com CNPJ inválido
  Given eu estou na tela de cadastro de bancos
  When eu preencho o campo "CNPJ" com "12.345.678/0001-00"  # inválido
  And eu preencho os demais campos com valores válidos
  And eu clico em "Salvar"
  Then devo ver a mensagem "CNPJ inválido. Por favor, informe um CNPJ válido."

Scenario: Tentativa de criar banco deixando campo obrigatório vazio
  Given eu estou na tela de cadastro de bancos
  When eu deixo o campo "Descrição do Banco" em branco
  And eu preencho os demais campos com valores válidos
  And eu clico em "Salvar"
  Then devo ver a mensagem "Descrição do Banco é obrigatória."
```

---

**User Story 2 – Edição de um banco existente**  
*(US02)*  

> **Como** usuário autorizado,  
> **eu quero** abrir e editar os dados de um banco já cadastrado,  
> **para** manter as informações atualizadas e corretas, exceto o código que permanece imutável.

### Descrição
Ao selecionar um registro na lista de bancos e clicar em **“Editar”** (ou abrir o registro), a tela de cadastro aparece preenchida com os dados atuais. O campo **Código** fica em **modo somente‑leitura** e não pode ser alterado. O usuário pode modificar qualquer outro campo. Depois de alterar os valores, ele clica em **“Salvar”** e o sistema atualiza o registro, exibindo mensagem de sucesso. Caso existam erros de validação, a aplicação indica qual campo está incorreto.

### Critérios de Aceite
| # | Critério |
|---|----------|
| 1 | O usuário consegue abrir um banco existente clicando em “Editar” na lista. |
| 2 | O campo **Código** aparece preenchido, mas não editável. |
| 3 | Ao alterar um campo obrigatório e salvar, a aplicação atualiza o registro e exibe *“Banco atualizado com sucesso.”* |
| 4 | Se algum campo obrigatório ficar vazio durante a edição, a aplicação exibe a mensagem de erro específica. |
| 5 | Se o usuário tentar alterar o campo **Código**, a aplicação mantém o valor original e não permite alteração. |
| 6 | Caso haja tentativa de salvar um CNPJ inválido, a aplicação mostra a mensagem *“CNPJ inválido. Por favor, informe um CNPJ válido.”* |
| 7 | O registro editado reflete na lista de bancos imediatamente após salvar. |

### BDD – Cenários Positivos  
```
Scenario: Edição de banco mantendo o código inalterado
  Given eu estou na tela de cadastro de um banco existente
  When eu altero o campo "Descrição do Banco" para "Banco do Sul"
  And eu altero o campo "Apelido" para "Sul"
  And eu altero o campo "Número de inscrição no SBP" para "87654321"
  And eu altero o campo "Banco Controlador" para "Banco Regional"
  And eu altero o campo "CNPJ" para "98.765.432/0001-10"
  And eu clico em "Salvar"
  Then devo ver a mensagem "Banco atualizado com sucesso."
  And o banco deve permanecer com o mesmo "Código" na lista de bancos
```

### BDD – Cenários Negativos  
```
Scenario: Tentativa de alterar o código do banco
  Given eu estou na tela de cadastro de um banco existente
  When eu tento alterar o campo "Código" para "NOVOCOD"
  And eu clico em "Salvar"
  Then o campo "Código" permanece com o valor original
  And eu não vejo nenhuma mensagem de erro
  And o sistema mantém o código antigo

Scenario: Tentativa de salvar banco com campo obrigatório vazio após edição
  Given eu estou na tela de cadastro de um banco existente
  When eu deixo o campo "Apelido" em branco
  And eu clico em "Salvar"
  Then devo ver a mensagem "Apelido é obrigatório."

Scenario: Tentativa de salvar banco com CNPJ inválido após edição
  Given eu estou na tela de cadastro de um banco existente
  When eu altero o campo "CNPJ" para "11.111.111/1111-11"  # inválido
  And eu clico em "Salvar"
  Then devo ver a mensagem "CNPJ inválido. Por favor, informe um CNPJ válido."
```

---

**Rastreabilidade**  

| Feature | US ID | BDD (Cenários Positivos) | BDD (Cenários Negativos) |
|---------|-------|---------------------------|--------------------------|
| Cadastro de bancos | US01 | 1 | 3 |
| Edição de bancos | US02 | 1 | 3 |

Estas duas User Stories cobrem integralmente os requisitos de cadastro e edição de bancos na aplicação, mantendo separação clara entre criação e atualização e evitando sobreposição de escopo. Cada cenário BDD é escrito na primeira pessoa do imperativo, permitindo validação manual ou automação de testes.