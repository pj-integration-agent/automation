## User Stories – Gestão de Bancos Nacionais

| # | User Story | Descrição detalhada | Critérios de Aceitação |
|---|------------|---------------------|------------------------|
| **US01** | *Como* operador de banco, *quero* cadastrar um novo banco na aplicação, *para* manter um registro atualizado e exclusivo de todos os bancos que operam no sistema. | A tela de cadastro é exibida quando o operador clica em **Novo**. Todos os campos obrigatórios são destacados e o sistema impede a gravação caso algum deles esteja em branco ou inválido. O campo **Código** deve ser único e não pode repetir nenhum código já existente. O campo **CNJP** deve ser validado contra a base oficial de CNPJ e não pode conter valores inválidos ou inexistentes. O campo **Banco Controlador** é um drop‑down que mostra apenas bancos já cadastrados. | 1. Ao clicar em **Novo** a tela de cadastro aparece com os campos **Código, Descrição do Banco, Apelido, Número de inscrição no SBP, Banco Controlador, CNJP**. <br>2. Todos esses campos são obrigatórios. <br>3. O **Código** deve ser único; ao digitar um código já existente o sistema exibe “Código já cadastrado” e impede o salvamento. <br>4. O **CNJP** deve passar por validação (formato e existência). Se inválido, exibe “CNJP inválido ou inexistente”. <br>5. O **Banco Controlador** apresenta uma lista de bancos já existentes. <br>6. Ao preencher todos os campos corretamente e clicar em **Salvar**, o registro é persistido e a tela retorna à lista de bancos com a mensagem “Banco cadastrado com sucesso”. |
| **US02** | *Como* operador de banco, *quero* editar os dados de um banco já cadastrado, *para* corrigir ou atualizar informações sem alterar o identificador do banco. | Ao abrir o registro de um banco e clicar em **Editar**, o campo **Código** torna‑se somente‑leitura. Todos os demais campos permanecem editáveis. O operador pode alterar descrição, apelido, SBP, banco controlador e CNJP (com as mesmas validações de US01). | 1. Seleção de um banco na lista e clique em **Editar** abre a tela de edição. <br>2. O campo **Código** é exibido em estado *não‑editável* (ex.: `disabled`). <br>3. Todos os demais campos são editáveis. <br>4. Validações de preenchimento e integridade (único código, CNJP válido, banco controlador existente) são reaplicadas. <br>5. Ao clicar em **Salvar**, as alterações são persistidas e a tela volta à lista com mensagem “Banco atualizado com sucesso”. |
| **US03** | *Como* operador de banco, *quero* receber mensagens claras de erro quando tentar cadastrar ou editar um banco com dados inválidos, *para* saber exatamente qual informação precisa ser corrigida. | O sistema deve apresentar mensagens de erro em tempo real, associadas a cada campo inválido, e impedir o salvamento até que todos os erros sejam corrigidos. | 1. Ao tentar salvar um registro com **Código** duplicado, exibe “Código já cadastrado”. <br>2. Ao digitar um **CNJP** inválido ou inexistente, exibe “CNJP inválido ou inexistente”. <br>3. Ao deixar qualquer campo obrigatório em branco, exibe “Campo obrigatório” abaixo do respectivo campo. <br>4. O botão **Salvar** fica desativado enquanto houver erros. <br>5. Quando todos os erros forem corrigidos, o botão **Salvar** torna‑se ativo. |
| **US04** | *Como* operador de banco, *quero* visualizar a lista atualizada de bancos após cada operação de cadastro ou edição, *para* confirmar que a alteração foi registrada no sistema. | A tela de lista deve ser atualizada imediatamente após a ação, exibindo todas as colunas principais (Código, Descrição, Apelido, SBP, Banco Controlador, CNJP). | 1. Após salvar um novo banco, a lista exibe o novo registro na primeira posição (ou posição correspondente a ordenação). <br>2. Após editar um banco, a lista reflete imediatamente as alterações. <br>3. Nenhum campo da lista deve ficar em branco; caso algum dado não esteja disponível, exibe “‑”. <br>4. A lista pode ser filtrada por Código ou Descrição (opcional, mas não obrigatório). |

---

## BDD – Cenários Positivos e Negativos

> **Obs.:** Todos os cenários estão escritos na primeira pessoa do imperativo, conforme solicitado.

### US01 – Cadastro de Banco

| Cenário | Descrição |
|---------|-----------|
| **Positivo 1 – Cadastro com todos os dados válidos** | Eu clico em “Novo”, preencho **Código 001**, **Descrição “Banco X”**, **Apelido “BX”**, **SBP 12345**, escolho “Banco Y” como controlador, digito **CNJP 12.345.678/0001‑90**, e salvo. A aplicação registra o banco e exibe “Banco cadastrado com sucesso”. |
| **Positivo 2 – Código único** | Eu clico em “Novo”, preencho **Código 002** (não existente), completo demais campos e salvo. O banco é criado sem erros. |
| **Negativo 1 – Código já existente** | Eu clico em “Novo”, preencho **Código 001** (já cadastrado), completo demais campos e salvo. Recebo a mensagem “Código já cadastrado” e o registro não é salvo. |
| **Negativo 2 – CNJP inválido** | Eu preencho **CNJP 99.999.999/9999‑99** (formato inválido), salvo. Recebo “CNJP inválido ou inexistente” e o registro não é salvo. |
| **Negativo 3 – CNJP inexistente** | Eu preencho **CNJP 12.345.678/0001‑91** (formato válido, mas inexistente na base), salvo. Recebo “CNJP inválido ou inexistente”. |
| **Negativo 4 – Campos obrigatórios vazios** | Eu clico em “Novo” e salvo sem preencher nenhum campo. Recebo “Campo obrigatório” em cada campo em branco, e o registro não é salvo. |
| **Negativo 5 – Banco Controlador inexistente** | Eu preencho **Banco Controlador** com um valor que não aparece na lista drop‑down. O campo é considerado inválido; o sistema exibe “Banco Controlador não encontrado” e impede o salvamento. |

### US02 – Edição de Banco

| Cenário | Descrição |
|---------|-----------|
| **Positivo 1 – Alteração de dados exceto Código** | Eu seleciono o banco “001 – Banco X”, clico em “Editar”, altero **Apelido** para “BXL”, **SBP** para 54321, e **CNJP** para um novo válido, e salvo. O banco fica atualizado, e a lista mostra as mudanças. |
| **Positivo 2 – Não alterar Código** | Eu tento mudar o campo **Código** durante a edição, mas ele permanece bloqueado. Não é possível alterar o valor. |
| **Negativo 1 – Alteração de Código** | Eu consigo mudar o campo **Código** (se não for bloqueado corretamente). Ao tentar salvar, o sistema rejeita a mudança e exibe “Código não pode ser alterado”. |
| **Negativo 2 – Alterar CNJP inválido** | Eu altero o campo **CNJP** para “11.111.111/1111‑11” (inválido) e salvo. Recebo “CNJP inválido ou inexistente”. |
| **Negativo 3 – Deixar campo obrigatório em branco** | Eu apago o conteúdo de **Descrição** e salvo. O sistema exibe “Campo obrigatório” abaixo de Descrição. |

### US03 – Mensagens de Erro

| Cenário | Descrição |
|---------|-----------|
| **Positivo 1 – Correção de erro** | Após tentar salvar com CNJP inválido, eu corrijo o CNJP para um válido e salvo. A mensagem de erro desaparece e o banco é salvo. |
| **Negativo 1 – Mensagens em tempo real** | Eu deixo o campo **Código** em branco e vejo “Campo obrigatório” aparecer imediatamente abaixo do campo, antes de tentar salvar. |

### US04 – Atualização da Lista

| Cenário | Descrição |
|---------|-----------|
| **Positivo 1 – Lista atualizada após cadastro** | Eu salvo um novo banco e observo a lista refletir o registro imediatamente sem precisar atualizar manualmente a página. |
| **Positivo 2 – Lista atualizada após edição** | Eu salvo alterações de um banco existente e vejo as novas informações imediatamente na lista. |

---

### Rastreabilidade

- **US01** → Feature de “Cadastro de Banco”  
- **US02** → Feature de “Edição de Banco”  
- **US03** → Feature de “Validação de Dados e Mensagens de Erro”  
- **US04** → Feature de “Atualização de Lista em Tempo Real”

Cada User Story contém seus cenários BDD correspondentes, garantindo cobertura de requisitos, testabilidade e alinhamento com as funcionalidades descritas nos critérios de aceite.