## User Stories

| # | User Story | Descrição | Critérios de Aceitação | Rastreabilidade |
|---|------------|-----------|------------------------|-----------------|
| **US01** | **Como administrador do sistema, quero cadastrar um novo banco para que a instituição possa registrar seus parceiros bancários de forma consistente e segura.** | Quando o usuário clicar em *Novo*, a aplicação deve abrir uma tela de cadastro que contenha os campos: <br>• Código (obrigatório, único) <br>• Descrição do Banco (obrigatório) <br>• Apelido (obrigatório) <br>• Número de inscrição no SBP (obrigatório) <br>• Banco Controlador (drop‑down, obrigatório) <br>• CNPJ (obrigatório, válido e existente) <br>O usuário deverá preencher todos os campos obrigatórios e clicar em *Salvar* para criar o registro. | 1. Ao abrir a tela de cadastro, todos os campos listados acima são exibidos e marcados como obrigatórios. <br>2. O campo *Código* aceita apenas caracteres alfanuméricos e tem comprimento máximo de 10. <br>3. Se o usuário inserir um código já existente, a aplicação exibe a mensagem de erro: “Código já cadastrado. Por favor, informe um código único.” <br>4. Se o usuário inserir um CNPJ inválido (formato ou dígito verificador incorretos) ou um CNPJ que não exista no banco de dados oficial, a mensagem “CNPJ inválido ou não encontrado” é exibida. <br>5. Todos os campos obrigatórios devem conter valores antes do botão *Salvar* ficar habilitado. <br>6. Ao clicar em *Salvar* com todos os campos válidos, o registro é persistido, a tela se fecha e o usuário retorna à lista de bancos exibindo o novo registro. <br>7. Se houver erro de validação, a aplicação mantém a tela aberta, destaca os campos inválidos e exibe a mensagem apropriada. | **(US01)** |
| **US02** | **Como administrador do sistema, quero abrir e editar um banco já cadastrado (exceto o Código) para que eu possa corrigir ou atualizar informações quando necessário.** | A partir da lista de bancos, o usuário pode abrir um registro clicando em *Editar*. A tela exibida deve apresentar os mesmos campos que a de cadastro, exceto que o campo *Código* é exibido em modo somente‑leitura. O usuário pode alterar Descrição, Apelido, Número de inscrição no SBP, Banco Controlador e CNPJ. Após as modificações, ele deve clicar em *Salvar* para persistir as alterações. | 1. O botão *Editar* está disponível para cada registro da lista. <br>2. Ao abrir a tela de edição, todos os campos (exceto *Código*) são editáveis; o campo *Código* é exibido mas bloqueado. <br>3. O usuário pode alterar o CNPJ apenas se ele for válido e existir; caso contrário, a mensagem de erro “CNPJ inválido ou não encontrado” aparece. <br>4. Se o usuário tentar alterar o código, nenhuma ação ocorre e o campo permanece somente‑leitura. <br>5. Ao clicar em *Salvar* com dados válidos, as alterações são salvas, a tela fecha e a lista atualiza com as informações editadas. <br>6. Se algum campo obrigatório ficar vazio ou contiver dados inválidos, o *Salvar* permanece desabilitado e a aplicação mostra os devidos avisos. | **(US02)** |

---

## BDD – Cenários Positivos e Negativos  

### US01 – Cadastro de Novo Banco  

```gherkin
Feature: Cadastro de novo banco
  Como administrador do sistema
  Eu quero cadastrar um novo banco
  Para que a instituição registre seus parceiros bancários de forma consistente

  Scenario: Cadastro bem-sucedido
    Dado que eu estou na tela de cadastro de banco
    Quando preencho o campo "Código" com "BAN001"
    E preencho o campo "Descrição do Banco" com "Banco do Nordeste"
    E preencho o campo "Apelido" com "BN"
    E preencho o campo "Número de inscrição no SBP" com "123456"
    E selecio**no**o "Banco do Estado" no drop‑down "Banco Controlador"
    E preencho o campo "CNPJ" com "12.345.678/0001-90"
    Quando clico no botão "Salvar"
    Então o registro deve ser criado
    E a lista de bancos exibe o novo banco "BAN001"

  Scenario: Código duplicado não é permitido
    Dado que já existe um banco com código "BAN001"
    Quando tento cadastrar um novo banco com o mesmo código "BAN001"
    Então a mensagem "Código já cadastrado. Por favor, informe um código único." é exibida
    E o botão "Salvar" permanece desabilitado

  Scenario: CNPJ inválido
    Dado que não existe um CNPJ no banco de dados oficial
    Quando preencho o campo "CNPJ" com "12.345.678/0001-99"
    E tento salvar
    Então a mensagem "CNPJ inválido ou não encontrado" é exibida
    E o botão "Salvar" permanece desabilitado

  Scenario: Campos obrigatórios não preenchidos
    Dado que estou na tela de cadastro
    Quando deixo os campos "Código", "Descrição do Banco", "Apelido", "Número de inscrição no SBP" e "CNPJ" vazios
    Então o botão "Salvar" está desabilitado
    E ao tentar clicar em "Salvar" exibe a mensagem "Todos os campos obrigatórios devem ser preenchidos"

  Scenario: Código com caracteres inválidos
    Dado que estou na tela de cadastro
    Quando preencho "Código" com "BAN@001"
    Então a mensagem "Código inválido. Use apenas letras e números" é exibida
    E o botão "Salvar" permanece desabilitado
```

### US02 – Edição de Banco Existente  

```gherkin
Feature: Edição de banco existente
  Como administrador do sistema
  Eu quero abrir e editar um banco já cadastrado (exceto o Código)
  Para que eu possa corrigir ou atualizar informações quando necessário

  Scenario: Edição bem-sucedida de campos permitidos
    Dado que existe um banco cadastrado com código "BAN002"
    Quando abro o registro "BAN002" para edição
    E altero o campo "Descrição do Banco" para "Banco do Sul"
    E altero o campo "Apelido" para "BS"
    E altero o número de inscrição no SBP para "654321"
    E altero o Banco Controlador para "Banco Central"
    E altero o CNPJ para "98.765.432/0001-10"
    Quando clico no botão "Salvar"
    Então o registro "BAN002" é atualizado na lista
    E as alterações refletem corretamente

  Scenario: Tentativa de alteração do Código
    Dado que existe um banco cadastrado com código "BAN003"
    Quando abro o registro "BAN003" para edição
    E tento alterar o campo "Código" para "BAN004"
    Então o campo permanece somente‑leitura e não há alteração
    E o botão "Salvar" salva apenas os campos modificados

  Scenario: CNPJ inválido durante edição
    Dado que existe um banco cadastrado com código "BAN004"
    Quando abro o registro "BAN004" para edição
    E altero o campo "CNPJ" para "98.765.432/0001-11"
    Quando clico no botão "Salvar"
    Então a mensagem "CNPJ inválido ou não encontrado" aparece
    E o registro não é atualizado

  Scenario: Salvar sem fazer nenhuma alteração
    Dado que existe um banco cadastrado com código "BAN005"
    Quando abro o registro "BAN005" para edição
    Quando clico no botão "Salvar" sem mudar nenhum campo
    Então o registro permanece inalterado
    E a mensagem "Nenhuma alteração detectada" é exibida

  Scenario: Campos obrigatórios vazios após edição
    Dado que existe um banco cadastrado com código "BAN006"
    Quando abro o registro "BAN006" para edição
    E limpo os campos "Descrição do Banco" e "CNPJ"
    Quando clico no botão "Salvar"
    Então a mensagem "Todos os campos obrigatórios devem ser preenchidos" aparece
    E o registro não é salvo
```

---  

Essas User Stories e cenários BDD garantem que as funcionalidades de cadastro e edição de bancos atendam aos requisitos de negócio, sejam testáveis, não sobreponham escopos e forneçam valor claro ao usuário final.