**User Story 01 – Cadastro de Banco (US01)**  
Como **usuário de cadastro de bancos**,  
eu quero **cadastrar um novo banco** para que o sistema mantenha um registro único e completo de cada instituição financeira.

**Descrição detalhada**  
Para criar um banco, o usuário deve clicar na opção “Novo” → a tela de cadastro é exibida.  
Os campos obrigatórios são:  
- **Código** – deve ser informado, único em todos os bancos já cadastrados;  
- **Descrição do Banco** – nome completo do banco;  
- **Apelido** – nome abreviado ou sigla;  
- **Número de Inscrição no SBP** – número de registro no Sistema Brasileiro de Pagamentos;  
- **Banco Controlador** – dropdown populado com a lista de bancos controladores existentes;  
- **CNPJ** – número de inscrição do banco, que deve ser válido e existente no cadastro nacional.  

Ao preencher todos os campos, o usuário clica em **Salvar**. O sistema valida os requisitos acima e, se tudo estiver correto, cria o registro e exibe a mensagem “Banco cadastrado com sucesso”.  

**Critérios de aceite objetivos**  

| # | Critério |
|---|----------|
| 1 | A tela de cadastro é exibida quando o usuário clica em “Novo”. |
| 2 | O campo **Código** é obrigatório e não pode ser igual a nenhum código já cadastrado. |
| 3 | Todos os campos listados na descrição são obrigatórios. |
| 4 | O campo **CNPJ** deve ser verificado contra a base nacional e rejeitado se não existir ou for inválido. |
| 5 | Após clicar em **Salvar**, o registro é criado somente se todas as validações passarem. |
| 6 | Caso alguma validação falhe, uma mensagem de erro específica é mostrada ao usuário. |

**BDD – Cenários Positivos (US01)**  

```gherkin
Feature: Cadastro de Banco

Scenario: Cadastro de banco com todos os dados corretos
  Dado que eu clique em “Novo”
  Quando eu preencho o campo "Código" com "001"
  E eu preencho o campo "Descrição do Banco" com "Banco Nacional"
  E eu preencho o campo "Apelido" com "BN"
  E eu preencho o campo "Número de Inscrição no SBP" com "123456789"
  E eu seleciono "Banco ABC" na lista de "Banco Controlador"
  E eu preencho o campo "CNPJ" com "12.345.678/0001-90"
  E eu clique em “Salvar”
  Então eu devo ver a mensagem “Banco cadastrado com sucesso”
  E o banco “Banco Nacional” deve estar na lista de bancos cadastrados
```

**BDD – Cenários Negativos (US01)**  

```gherkin
Scenario: Tentativa de cadastro sem preencher o campo "Código"
  Dado que eu clique em “Novo”
  Quando eu deixo o campo "Código" vazio
  E eu preencho os demais campos obrigatórios
  E eu clique em “Salvar”
  Então eu devo ver a mensagem de erro “Código é obrigatório”

Scenario: Tentativa de cadastro com código já existente
  Dado que existe um banco cadastrado com o código "001"
  Quando eu clique em “Novo”
  E eu preencho o campo "Código" com "001"
  E eu preencho os demais campos obrigatórios
  E eu clique em “Salvar”
  Então eu devo ver a mensagem de erro “Código já existe”

Scenario: Tentativa de cadastro com CNPJ inválido
  Dado que eu clique em “Novo”
  Quando eu preencho o campo "Código" com "002"
  E eu preencho os demais campos obrigatórios
  E eu preencho o campo "CNPJ" com "12.345.678/0001-00"  # número fictício
  E eu clique em “Salvar”
  Então eu devo ver a mensagem de erro “CNPJ inválido”

Scenario: Tentativa de cadastro deixando um campo obrigatório em branco
  Dado que eu clique em “Novo”
  Quando eu deixo o campo "Apelido" em branco
  E eu preencho os demais campos obrigatórios
  E eu clique em “Salvar”
  Então eu devo ver a mensagem de erro “Apelido é obrigatório”
```

---

**User Story 02 – Edição de Banco (US02)**  
Como **usuário de cadastro de bancos**,  
eu quero **editar as informações de um banco existente** para garantir que os dados estejam sempre atualizados, sem alterar seu identificador único.

**Descrição detalhada**  
Para editar um banco, o usuário deve localizar o registro na lista, clicar em “Editar” → a tela de edição se abre com os campos preenchidos.  
O campo **Código** permanece bloqueado (somente leitura).  
Os demais campos (Descrição, Apelido, Número de Inscrição no SBP, Banco Controlador, CNPJ) podem ser alterados.  
Após modificar, o usuário clica em **Salvar** → o sistema valida novamente os requisitos (uniqueness de Código permanece garantido, CNPJ ainda deve ser válido) e grava as alterações.

**Critérios de aceite objetivos**  

| # | Critério |
|---|----------|
| 1 | O usuário pode abrir a tela de edição clicando em “Editar” no registro desejado. |
| 2 | O campo **Código** está bloqueado e não pode ser modificado. |
| 3 | Todos os demais campos são editáveis. |
| 4 | Ao clicar em “Salvar”, o sistema valida que o CNPJ continua válido e existente. |
| 5 | Se as validações passarem, a alteração é salva e a mensagem “Banco atualizado com sucesso” é exibida. |
| 6 | Se alguma validação falhar, a mensagem de erro correspondente é exibida e nenhuma alteração é persistida. |

**BDD – Cenários Positivos (US02)**  

```gherkin
Feature: Edição de Banco

Scenario: Atualizar apenas o campo "Apelido" de um banco
  Dado que existe um banco cadastrado com Código "001"
  Quando eu clico em “Editar” na linha do banco "001"
  Então o campo "Código" é exibido como somente leitura
  E eu preencho o campo "Apelido" com "BN Atualizado"
  E eu clique em “Salvar”
  Então eu devo ver a mensagem “Banco atualizado com sucesso”
  E o banco “001” deve exibir o Apelido “BN Atualizado” na lista de bancos
```

**BDD – Cenários Negativos (US02)**  

```gherkin
Scenario: Tentar alterar o campo "Código" (bloqueado)
  Dado que existe um banco cadastrado com Código "001"
  Quando eu clico em “Editar” na linha do banco "001"
  E eu tento digitar "002" no campo "Código"
  Então o campo permanece com o valor "001" e não permite alteração

Scenario: Salvar edição com CNPJ inválido
  Dado que existe um banco cadastrado com Código "001"
  Quando eu clico em “Editar” na linha do banco "001"
  E eu preencho o campo "CNPJ" com "12.345.678/0001-00"
  E eu clique em “Salvar”
  Então eu devo ver a mensagem de erro “CNPJ inválido”

Scenario: Salvar edição deixando campo obrigatório em branco
  Dado que existe um banco cadastrado com Código "001"
  Quando eu clico em “Editar” na linha do banco "001"
  E eu deixo o campo "Número de Inscrição no SBP" em branco
  E eu clique em “Salvar”
  Então eu devo ver a mensagem de erro “Número de Inscrição no SBP é obrigatório”
```

---

**Rastreabilidade entre requisitos e histórias**

| Requisito | User Story |
|-----------|------------|
| A tela de cadastro é exibida ao clicar em “Novo”. | US01 |
| Código obrigatório e único. | US01 |
| Campos obrigatórios listados. | US01 |
| CNPJ válido e existente. | US01 |
| Botão “Salvar” valida e grava registro. | US01 |
| Código bloqueado na edição. | US02 |
| Edição de demais campos permitida. | US02 |
| Salvar valida CNPJ novamente. | US02 |
| Mensagens de sucesso e erro claras. | US01, US02 |

---

### Resumo das histórias
- **US01** – Cadastro de Banco (com validações de campos obrigatórios, unicidade de código e validade de CNPJ).  
- **US02** – Edição de Banco (código bloqueado, edição de campos permitidos, validação de CNPJ e mensagens de feedback).

Cada história possui cenários BDD positivos e negativos, garantindo que o desenvolvimento seja guiado por critérios claros, testáveis e alinhados ao valor entregue ao usuário final.