**User Stories & BDD (Português – primeira pessoa, imperativo)**  

*(Todas as histórias foram criadas com foco no usuário final – Gestor Bancário – e estão numeradas para rastreabilidade.)*  

---

## US01 – Cadastro de Novo Banco  

**Como** gestor bancário  
**Eu quero** cadastrar um novo banco  
**para** manter o registro atualizado e garantir a integridade dos dados do sistema.

**Descrição detalhada**  
Quando aciono a opção **“Novo”** na tela de bancos, devo ser levado a uma tela de cadastro onde todos os campos obrigatórios são exibidos. Os campos são:  
- **Código** – string única (não pode coincidir com nenhum código já cadastrado).  
- **Descrição do Banco** – texto livre.  
- **Apelido** – texto livre.  
- **Número de inscrição no SBP** – string numérica.  
- **Banco Controlador** – dropdown com a lista de bancos já existentes (não pode ficar em branco).  
- **CNPJ** – string no formato padrão e deve existir no cadastro oficial (validação externa/internacional).  

Após preencher todos os campos, a opção **“Salvar”** deve validar os dados e persistir o registro. Se algo falhar, uma mensagem de erro específica deve ser exibida.  

**Critérios de Aceite**  
1. Ao clicar em **“Novo”**, a tela de cadastro deve abrir.  
2. Todos os campos listados são obrigatórios.  
3. O campo **Código** não pode repetir um código já cadastrado.  
4. O campo **CNPJ** deve passar na validação de formato e existir no banco oficial.  
5. Ao clicar em **“Salvar”**, se todos os requisitos forem atendidos, o registro é salvo e a tela volta à lista de bancos com a nova entrada visível.  
6. Se houver erro (campo vazio, código duplicado, CNPJ inválido), a tela permanece aberta e mostra mensagens de erro claras e específicas.  

### BDD – Cenários Positivos  
```gherkin
Feature: Cadastro de Novo Banco
  Scenario: Cadastro completo e válido
    Dado que eu esteja na tela de lista de bancos
    Quando eu clico em "Novo"
    E preencho "Código" com "BAN001"
    E preencho "Descrição do Banco" com "Banco Teste Nacional"
    E preencho "Apelido" com "BTN"
    E preencho "Número de inscrição no SBP" com "123456"
    E seleciono "Banco Controlador" com "Banco Central"
    E preencho "CNPJ" com "12.345.678/0001-90"
    Então eu clico em "Salvar"
    E vejo o registro "BAN001" na lista de bancos
    E a mensagem "Cadastro concluído com sucesso" é exibida
```

### BDD – Cenários Negativos  
```gherkin
Feature: Cadastro de Novo Banco – Validação de Campos Obrigatórios
  Scenario: Código em branco
    Dado que eu esteja na tela de cadastro
    Quando eu deixo o campo "Código" em branco
    E preencho os demais campos com valores válidos
    Então eu clico em "Salvar"
    E a mensagem "Código é obrigatório" aparece

  Scenario: Código duplicado
    Dado que exista já um banco cadastrado com Código "BAN001"
    Quando eu clico em "Novo" e preencho "Código" com "BAN001"
    E preencho os demais campos com valores válidos
    Então eu clico em "Salvar"
    E a mensagem "Código já cadastrado" aparece

  Scenario: CNPJ inválido (formato)
    Dado que eu esteja na tela de cadastro
    Quando eu preencho "CNPJ" com "123"
    E preencho os demais campos com valores válidos
    Então eu clico em "Salvar"
    E a mensagem "CNPJ inválido" aparece

  Scenario: CNPJ não existente no cadastro oficial
    Dado que eu esteja na tela de cadastro
    Quando eu preencho "CNPJ" com "99.999.999/9999-99"
    E preencho os demais campos com valores válidos
    Então eu clico em "Salvar"
    E a mensagem "CNPJ não encontrado no cadastro oficial" aparece

  Scenario: Banco Controlador não selecionado
    Dado que eu esteja na tela de cadastro
    Quando eu deixo o campo "Banco Controlador" sem seleção
    E preencho os demais campos com valores válidos
    Então eu clico em "Salvar"
    E a mensagem "Banco Controlador é obrigatório" aparece
```

---

## US02 – Edição de Banco Existente  

**Como** gestor bancário  
**Eu quero** editar um banco já cadastrado  
**para** corrigir ou atualizar informações sem alterar o identificador único.

**Descrição detalhada**  
A partir da lista de bancos, ao selecionar um registro e escolher a opção **“Editar”** (ou duplo‑clique), a tela de cadastro deve abrir já preenchida com os dados atuais. O campo **Código** é exibido, mas não pode ser editado (ex.: desabilitado). Todos os demais campos permanecem obrigatórios e seguem as mesmas regras de validação do cadastro. Após fazer as alterações, ao clicar em **“Salvar”** o sistema valida os dados e persiste as mudanças.  

**Critérios de Aceite**  
1. O usuário pode abrir qualquer registro existente e a tela de edição deve abrir com os dados corretos.  
2. O campo **Código** deve estar visível mas não editável (desabilitado ou somente leitura).  
3. Todos os demais campos continuam obrigatórios e seguem as regras de validação (formato, unicidade, existência, etc.).  
4. Ao clicar em **“Salvar”**, as alterações são persistidas e a lista reflete os novos valores.  
5. Se houver erro de validação, a tela permanece aberta com mensagens específicas e o usuário pode corrigir.  

### BDD – Cenários Positivos  
```gherkin
Feature: Edição de Banco
  Scenario: Editar descrição e CNPJ de forma válida
    Dado que exista um banco cadastrado com Código "BAN001"
    E eu esteja na lista de bancos
    Quando eu clico no registro "BAN001" e seleciono "Editar"
    E altero "Descrição do Banco" para "Banco Teste Editado"
    E altero "CNPJ" para "12.345.678/0001-91"
    Então eu clico em "Salvar"
    E vejo as alterações refletidas na lista de bancos
    E a mensagem "Alterações salvas com sucesso" é exibida
```

### BDD – Cenários Negativos  
```gherkin
Feature: Edição de Banco – Validação de Campos
  Scenario: Tentar alterar Código (não permitido)
    Dado que exista um banco cadastrado com Código "BAN001"
    Quando eu clico em "Editar" no registro "BAN001"
    Então o campo "Código" é exibido mas está desabilitado

  Scenario: Deixar um campo obrigatório vazio na edição
    Dado que exista um banco cadastrado com Código "BAN001"
    Quando eu clico em "Editar" e deixo "Apelido" em branco
    Então eu clico em "Salvar"
    E a mensagem "Apelido é obrigatório" aparece

  Scenario: Inserir CNPJ inválido na edição
    Dado que exista um banco cadastrado com Código "BAN001"
    Quando eu clico em "Editar" e altero "CNPJ" para "111"
    Então eu clico em "Salvar"
    E a mensagem "CNPJ inválido" aparece

  Scenario: Inserir CNPJ que não existe no cadastro oficial
    Dado que exista um banco cadastrado com Código "BAN001"
    Quando eu clico em "Editar" e altero "CNPJ" para "99.999.999/9999-99"
    Então eu clico em "Salvar"
    E a mensagem "CNPJ não encontrado no cadastro oficial" aparece
```

---

> **Rastreabilidade**  
> - **US01** – Cadastro de Novo Banco  
> - **US02** – Edição de Banco Existente  

Estas histórias e cenários garantem cobertura completa das regras de negócio, permitem testes automatizados claros e evitam sobreposição de escopo entre as funcionalidades de criação e edição.