**User Stories – Sistema de Bancos Nacionais**  
*(Rastreabilidade: US01, US02)*  

---

### US01 – Cadastro de Novo Banco  
**Como** administrador de bancos, **eu quero** cadastrar um novo banco no sistema **para** manter a base de dados atualizada e garantir que cada instituição tenha um identificador único e informações válidas.  

**Descrição detalhada**  
Ao clicar em **“Novo”** na tela de Bancos Nacionais, o usuário deve ser redirecionado para uma tela de cadastro contendo os campos obrigatórios:  
- **Código** (texto, único, obrigatório)  
- **Descrição do Banco** (texto, obrigatório)  
- **Apelido** (texto, obrigatório)  
- **Número de Inscrição no SBP** (texto, obrigatório)  
- **Banco Controlador** (dropdown com lista de bancos já cadastrados, obrigatório)  
- **CNPJ** (texto, obrigatório, deve ser válido e existir na base de cadastro de CNPJs do país)  

Ao preencher todos os campos e clicar em **“Salvar”**, o sistema deve validar os dados e persistir o registro, exibindo mensagem de sucesso.  

**Critérios de Aceitação**  

| Nº | Critério | Observação |
|---|-----------|------------|
| 1 | A tela de cadastro é exibida ao clicar em “Novo”. | – |
| 2 | Todos os campos listados acima são obrigatórios e não podem ficar em branco. | – |
| 3 | O campo “Código” deve ser único; o sistema deve impedir a inserção de um código já existente, exibindo mensagem de erro. | – |
| 4 | O campo “CNPJ” deve ser verificado contra a base oficial de CNPJs; valores inválidos ou inexistentes geram erro. | – |
| 5 | Após clicar em “Salvar”, se todos os dados forem válidos, o registro é criado e uma mensagem “Banco cadastrado com sucesso” é exibida. | – |
| 6 | Caso haja erro de validação, o sistema exibe a mensagem específica e mantém o usuário na tela de cadastro sem salvar. | – |

**Rastreabilidade** – (US01)

---

### US02 – Edição de Banco Existente  
**Como** administrador de bancos, **eu quero** abrir e editar os detalhes de um banco já cadastrado (exceto o Código) **para** corrigir informações desatualizadas ou incorretas.  

**Descrição detalhada**  
O usuário deve conseguir localizar o banco desejado na lista de bancos existentes. Ao selecionar o registro, a tela de cadastro já preenchida deve aparecer, permitindo a edição dos seguintes campos:  
- **Descrição do Banco**  
- **Apelido**  
- **Número de Inscrição no SBP**  
- **Banco Controlador**  
- **CNPJ**  

O campo **Código** aparece como *read‑only* e não pode ser alterado.  

Ao concluir as edições e clicar em **“Salvar”**, o sistema valida as alterações (verificando novamente a validade do CNPJ e que nenhum outro campo obrigatório ficou vazio) e persiste a atualização, exibindo mensagem de sucesso.  

**Critérios de Aceitação**  

| Nº | Critério | Observação |
|---|-----------|------------|
| 1 | O usuário consegue abrir um registro existente (por lista ou busca). | – |
| 2 | O campo “Código” está visível mas marcado como *read‑only* e não pode ser alterado. | – |
| 3 | Os demais campos podem ser editados livremente, respeitando as mesmas regras de validação do cadastro (obrigatoriedade, validade do CNPJ, etc.). | – |
| 4 | Após clicar em “Salvar”, se todas as validações passarem, a alteração é persistida e a mensagem “Banco atualizado com sucesso” é exibida. | – |
| 5 | Caso haja erro de validação, a mensagem correspondente aparece e o registro permanece sem alterações. | – |

**Rastreabilidade** – (US02)

---

## BDD – Cenários Positivos e Negativos  

*(Primeira pessoa do imperativo – “Eu …”)*  

---

### US01 – Cadastro de Novo Banco  

#### Cenário Positivo: Cadastro completo e válido  
```
Eu entro na tela de Bancos Nacionais
Eu clico em “Novo”
Eu preencho “Código” com “B001”
Eu preencho “Descrição do Banco” com “Banco Nacional S/A”
Eu preencho “Apelido” com “BNASA”
Eu preencho “Número de Inscrição no SBP” com “12345678”
Eu seleciono “Banco Controlador” com “Banco Central”
Eu preencho “CNPJ” com “12.345.678/0001-90” (válido e existente)
Eu clico em “Salvar”
Então eu devo ver a mensagem “Banco cadastrado com sucesso”
E o banco “B001” deve aparecer na lista de bancos
```

#### Cenário Negativo 1: Código em branco  
```
Eu entro na tela de Bancos Nacionais
Eu clico em “Novo”
Eu deixo “Código” em branco
Eu preencho os demais campos com valores válidos
Eu clico em “Salvar”
Então eu devo ver a mensagem de erro “O campo Código é obrigatório”
E nenhum banco é salvo
```

#### Cenário Negativo 2: Código duplicado  
```
Eu já tenho um banco cadastrado com “Código” = “B001”
Eu entro na tela de Bancos Nacionais
Eu clico em “Novo”
Eu preencho “Código” com “B001” (mesmo código)
Eu preencho os demais campos com valores válidos
Eu clico em “Salvar”
Então eu devo ver a mensagem de erro “Código já existe, escolha outro”
E nenhum banco é salvo
```

#### Cenário Negativo 3: CNPJ inválido  
```
Eu entro na tela de Bancos Nacionais
Eu clico em “Novo”
Eu preencho “Código” com “B002”
Eu preencho os demais campos com valores válidos, exceto
Eu preencho “CNPJ” com “11.222.333/4444-55” (inválido)
Eu clico em “Salvar”
Então eu devo ver a mensagem de erro “CNPJ inválido ou não encontrado”
E nenhum banco é salvo
```

#### Cenário Negativo 4: Campo obrigatório faltando  
```
Eu entro na tela de Bancos Nacionais
Eu clico em “Novo”
Eu preencho “Código” com “B003”
Eu deixo “Descrição do Banco” em branco
Eu preencho os demais campos com valores válidos
Eu clico em “Salvar”
Então eu devo ver a mensagem de erro “O campo Descrição do Banco é obrigatório”
E nenhum banco é salvo
```

---

### US02 – Edição de Banco Existente  

#### Cenário Positivo: Alteração de campos permitidos  
```
Eu já tenho um banco cadastrado com “Código” = “B001”
Eu entro na tela de Bancos Nacionais
Eu seleciono o banco “B001” na lista
Eu vejo a tela de cadastro pré‑preenchida
Eu altero “Apelido” para “BNASA1”
Eu altero “CNPJ” para “98.765.432/0001-10” (válido)
Eu clico em “Salvar”
Então eu devo ver a mensagem “Banco atualizado com sucesso”
E o banco “B001” reflete as alterações na lista
```

#### Cenário Negativo 1: Tentativa de alterar Código  
```
Eu já tenho um banco cadastrado com “Código” = “B001”
Eu entro na tela de Bancos Nacionais
Eu seleciono o banco “B001”
Eu observo que o campo “Código” está em *read‑only*
Eu tento digitar “B002” no campo “Código”
Então o campo não aceita a alteração
```

#### Cenário Negativo 2: CNPJ inválido na edição  
```
Eu já tenho um banco cadastrado com “Código” = “B001”
Eu entro na tela de Bancos Nacionais
Eu seleciono o banco “B001”
Eu altero “CNPJ” para “99.888.777/6666-55” (inválido)
Eu clico em “Salvar”
Então eu devo ver a mensagem de erro “CNPJ inválido ou não encontrado”
E as alterações não são salvas
```

#### Cenário Negativo 3: Campo obrigatório deixado em branco  
```
Eu já tenho um banco cadastrado com “Código” = “B001”
Eu entro na tela de Bancos Nacionais
Eu seleciono o banco “B001”
Eu apago o conteúdo de “Apelido”
Eu clico em “Salvar”
Então eu devo ver a mensagem de erro “O campo Apelido é obrigatório”
E as alterações não são salvas
```

---

> **Obs.:** Todos os cenários acima são *testáveis* e garantem a cobertura de requisitos críticos para as funcionalidades de cadastro e edição de bancos nacionais, mantendo a consistência e integridade dos dados.