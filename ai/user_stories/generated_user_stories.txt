**User Stories – Sistema de Cadastro de Bancos Nacionais**

| ID | User Story | Descrição (detalhada) | Critérios de Aceite (objetivos) |
|----|------------|------------------------|--------------------------------|
| **US01** | Como usuário de cadastro de bancos, eu quero criar um novo registro de banco para que o sistema mantenha um banco único e completo com todas as informações obrigatórias. | Quando o usuário clica em **Novo**, o sistema deve abrir uma tela de cadastro com os campos: **Código**, **Descrição do Banco**, **Apelido**, **Número de inscrição no SBP**, **Banco Controlador** (lista de opções) e **CNPJ**. Todos os campos são obrigatórios. O código não pode ser igual a nenhum já existente. O CNPJ deve ser válido (formato e dígitos verificadores) e existir no cadastro oficial. O campo **Banco Controlador** deve ser preenchido com um valor da lista existente. Quando o usuário clica em **Salvar**, o sistema valida todas as regras e, se tudo estiver correto, persiste o registro e exibe uma mensagem de sucesso. | 1. Ao abrir a tela de cadastro, todos os campos obrigatórios estão visíveis.  <br> 2. O sistema impede a persistência se algum campo obrigatório estiver vazio.  <br> 3. O sistema impede a persistência se o **Código** já existir em outro registro.  <br> 4. O sistema valida o CNPJ (formato e dígito verificador) e verifica sua existência.  <br> 5. O campo **Banco Controlador** mostra apenas opções válidas da lista.  <br> 6. Ao clicar em **Salvar**, se todas as validações passarem, o registro é salvo e uma mensagem “Banco cadastrado com sucesso” é exibida.  <br> 7. O usuário é redirecionado para a lista de bancos. |
| **US02** | Como usuário de cadastro de bancos, eu quero editar um registro já existente (exceto o Código) para que possa atualizar informações que mudam ao longo do tempo. | Quando o usuário seleciona um registro na lista e clica em **Editar**, o sistema exibe a tela de edição com os mesmos campos da tela de cadastro, exceto que o campo **Código** fica somente leitura. O usuário pode alterar **Descrição do Banco**, **Apelido**, **Número de inscrição no SBP**, **Banco Controlador** e **CNPJ**. Ao clicar em **Salvar**, o sistema valida as mesmas regras de US01 (excluindo a regra de unicidade do Código) e persiste as alterações, exibindo uma mensagem de sucesso. | 1. O campo **Código** é exibido, mas está somente leitura.  <br> 2. Os demais campos podem ser editados.  <br> 3. O sistema impede a persistência se algum campo obrigatório (exceto Código) estiver vazio.  <br> 4. O sistema valida o CNPJ conforme US01.  <br> 5. O sistema valida a seleção do Banco Controlador conforme US01.  <br> 6. Ao clicar em **Salvar**, se todas as validações passarem, o registro é atualizado e uma mensagem “Banco atualizado com sucesso” é exibida.  <br> 7. O usuário permanece na tela de edição ou é redirecionado para a lista de bancos. |

---

## BDD – Cenários Positivos e Negativos

### US01 – Cadastrar Novo Banco

#### Cenário Positivo 1 – Cadastro bem‑sucedido
```gherkin
Dado que eu estou na tela de cadastro de bancos
Quando eu preencher o campo "Código" com "B001"
E eu preencher o campo "Descrição do Banco" com "Banco Nacional ABC"
E eu preencher o campo "Apelido" com "ABC"
E eu preencher o campo "Número de inscrição no SBP" com "1234567"
E eu selecionar "Banco XYZ" no campo "Banco Controlador"
E eu inserir um CNPJ válido "12.345.678/0001-95" que existe no cadastro oficial
E eu clicar em "Salvar"
Então eu devo ver a mensagem "Banco cadastrado com sucesso"
E eu devo ser redirecionado para a lista de bancos
```

#### Cenário Negativo 1 – Código já existente
```gherkin
Dado que já existe um banco cadastrado com o Código "B001"
Quando eu abrir a tela de cadastro de bancos
E eu preencher o campo "Código" com "B001"
E eu preencher os demais campos obrigatórios com valores válidos
E eu clicar em "Salvar"
Então eu devo ver a mensagem de erro "O Código informado já existe. Por favor, escolha outro."
```

#### Cenário Negativo 2 – CNPJ inválido (formato)
```gherkin
Dado que eu estou na tela de cadastro de bancos
Quando eu preencher o campo "Código" com "B002"
E eu preencher os demais campos obrigatórios com valores válidos
E eu inserir um CNPJ inválido "12.345.678/0001-00" (dígito verificador incorreto)
E eu clicar em "Salvar"
Então eu devo ver a mensagem de erro "O CNPJ informado é inválido."
```

#### Cenário Negativo 3 – CNPJ inexistente no cadastro oficial
```gherkin
Dado que eu estou na tela de cadastro de bancos
Quando eu preencher o campo "Código" com "B003"
E eu preencher os demais campos obrigatórios com valores válidos
E eu inserir um CNPJ válido em formato, porém inexistente no cadastro oficial "98.765.432/0001-10"
E eu clicar em "Salvar"
Então eu devo ver a mensagem de erro "O CNPJ informado não está registrado no cadastro oficial."
```

#### Cenário Negativo 4 – Campo obrigatório em branco
```gherkin
Dado que eu estou na tela de cadastro de bancos
Quando eu preencher somente o campo "Código" com "B004"
E eu deixar os demais campos obrigatórios vazios
E eu clicar em "Salvar"
Então eu devo ver a mensagem de erro "Todos os campos obrigatórios devem ser preenchidos."
```

#### Cenário Negativo 5 – Banco Controlador não selecionado
```gherkin
Dado que eu estou na tela de cadastro de bancos
Quando eu preencher todos os campos obrigatórios, exceto "Banco Controlador"
E eu clicar em "Salvar"
Então eu devo ver a mensagem de erro "Selecione um Banco Controlador válido."
```

---

### US02 – Editar Banco Existente

#### Cenário Positivo 1 – Edição bem‑sucedida
```gherkin
Dado que existe um banco cadastrado com Código "B005" e Descrição "Banco Original"
E eu estou na lista de bancos
Quando eu clico em "Editar" no registro "B005"
E eu altero "Descrição do Banco" para "Banco Alterado"
E eu altero "Apelido" para "Alterado"
E eu altero "Número de inscrição no SBP" para "7654321"
E eu altero "Banco Controlador" para "Banco XYZ"
E eu altero CNPJ para "23.456.789/0001-56" (válido e existente)
E eu clico em "Salvar"
Então eu devo ver a mensagem "Banco atualizado com sucesso"
E eu devo ser redirecionado para a lista de bancos
E o registro "B005" deve refletir as alterações feitas.
```

#### Cenário Negativo 1 – Tentar mudar o Código
```gherkin
Dado que existe um banco cadastrado com Código "B006"
E eu estou na lista de bancos
Quando eu clico em "Editar" no registro "B006"
E eu tento mudar o campo "Código" de "B006" para "B007"
E eu salvo
Então o campo "Código" permanece com valor "B006"
E nenhuma mensagem de erro é exibida
E o banco continua com Código "B006"
```

#### Cenário Negativo 2 – CNPJ inválido na edição
```gherkin
Dado que existe um banco cadastrado com Código "B007"
E eu estou na lista de bancos
Quando eu clico em "Editar" no registro "B007"
E eu insero um CNPJ inválido "11.111.111/1111-11" no campo "CNPJ"
E eu clico em "Salvar"
Então eu devo ver a mensagem de erro "O CNPJ informado é inválido."
```

#### Cenário Negativo 3 – Campos obrigatórios em branco na edição
```gherkin
Dado que existe um banco cadastrado com Código "B008"
E eu estou na lista de bancos
Quando eu clico em "Editar" no registro "B008"
E eu limpo os campos "Descrição do Banco", "Apelido", "Número de inscrição no SBP" e "Banco Controlador"
E eu clico em "Salvar"
Então eu devo ver a mensagem de erro "Todos os campos obrigatórios devem ser preenchidos."
```

#### Cenário Negativo 4 – Banco Controlador inválido na edição
```gherkin
Dado que existe um banco cadastrado com Código "B009"
E eu estou na lista de bancos
Quando eu clico em "Editar" no registro "B009"
E eu seleciono um valor inexistente no campo "Banco Controlador"
E eu clico em "Salvar"
Então eu devo ver a mensagem de erro "Selecione um Banco Controlador válido."
```

---

> **Obs.**: Cada cenário utiliza linguagem imperativa em primeira pessoa (“eu preenchendo”, “eu clicando”) conforme solicitado.  
> Todas as regras de negócio são testáveis, as mensagens de erro são explícitas, e há rastreabilidade clara entre User Stories (US01, US02) e os cenários BDD.