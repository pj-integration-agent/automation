## 1. Quais testes falharam?

| Nº | Nome do teste | Data e hora | Status |
|----|---------------|--------------|--------|
| 1 | **Login inválido falhou** | 2025‑12‑12 19:03:13 | ❌ Falhou |
| 2 | **Usuário deve atualizar telefone com campo vazio falhou** | 2025‑12‑12 19:03:14 | ❌ Falhou |

> **Resumo** – Ambos os testes falharam em pontos de verificação de mensagem de erro.

---

## 2. Motivo de cada falha

### Teste 1 – *Login inválido falhou*

| Item | Descrição |
|------|-----------|
| **Expectativa** | `.error` deve conter a substring:<br>```"An internal error has occurred and has been logged."``` |
| **Valor recebido** | `<p class="error">The username and password could not be verified.</p>` |
| **Erro** | O texto exibido não corresponde ao esperado. |
| **Análise** | 1. **Mensagem de erro diferente** – O sistema retornou “The username and password could not be verified.” em vez de “An internal error … logged.”<br>2. **Possível mudança de requisitos** – Talvez o teste tenha sido escrito quando a aplicação exibia um erro interno e depois foi alterado para um erro de autenticação.<br>3. **Possível erro de teste** – O teste pode estar esperando a mensagem errada ou a mensagem pode estar em outro elemento. |

### Teste 2 – *Usuário deve atualizar telefone com campo vazio falhou*

| Item | Descrição |
|------|-----------|
| **Expectativa** | O elemento com `id="phone-error"` deve conter a substring “Phone is required.” |
| **Erro** | <ul><li>O elemento **não foi encontrado** (`element(s) not found`).</li><li>O tempo limite de 5 s expirou sem que o elemento aparecesse.</li></ul> |
| **Análise** | 1. **Locador incorreto** – O `id` usado no teste pode estar errado (ex.: `phone-error` vs `phone-error-msg`).<br>2. **Validação não disparada** – O formulário pode não ter sido submetido ou o JavaScript de validação pode estar desabilitado.<br>3. **Elemento está fora de viewport ou dentro de iframe** – Se o campo está dentro de um iframe ou modal, o Playwright não o vê sem o `frameLocator`.<br>4. **Renderização assíncrona** – O erro pode aparecer depois de um delay maior que 5 s. |

---

## 3. Sugestões de correção

### 3.1. Corrigir o teste de login

1. **Verifique o requisito real**  
   - Abra o aplicativo em modo de depuração ou peça ao desenvolvedor qual mensagem deve aparecer quando o login falhar.  
   - Se a mensagem correta é “The username and password could not be verified.”, atualize o teste.

2. **Use um `toContainText` mais genérico**  
   ```js
   await expect(page.locator('.error')).toContainText('username and password could not be verified');
   ```
   - Assim, pequenas variações de formatação ou diacríticos não farão o teste falhar.

3. **Adicionar verificação de visibilidade antes de testar o texto**  
   ```js
   const errorEl = page.locator('.error');
   await expect(errorEl).toBeVisible();
   await expect(errorEl).toContainText('username and password could not be verified');
   ```

4. **Capturar screenshot em caso de falha**  
   ```js
   await page.screenshot({ path: 'login-error.png' });
   ```
   - Facilita a investigação de problemas futuros.

### 3.2. Corrigir o teste de telefone

1. **Confirme o seletor correto**  
   - Abra a página de edição de perfil, use o DevTools para encontrar o elemento que exibe o erro de telefone.  
   - Se o `id` for diferente, atualize o teste:
     ```js
     await expect(page.locator('#phone-error-msg')).toContainText('Phone is required.');
     ```

2. **Assegure que a validação seja acionada**  
   - Certifique-se de que o teste:
     1. Limpa o campo de telefone (`await page.fill('#phone', '');`)
     2. Submete o formulário (`await page.click('button[type="submit"]');`)

3. **Use `frameLocator` se necessário**  
   - Se o campo de telefone estiver dentro de um iframe/modal:
     ```js
     const frame = page.frame({ name: 'profile-frame' });
     await expect(frame.locator('#phone-error')).toContainText('Phone is required.');
     ```

4. **Aumente o timeout ou espere a renderização**  
   ```js
   await expect(page.locator('#phone-error')).toContainText('Phone is required.', { timeout: 10000 });
   ```

5. **Adicionar verificação de erro inexistente em cenários de sucesso**  
   - Garantir que o erro só aparece quando o campo realmente está vazio.

6. **Registrar screenshot em caso de falha**  
   - Igual ao teste de login.

### 3.3. Boas práticas adicionais

- **Separar expectativas de mensagem** – Se a mensagem pode variar (por exemplo, idioma), use `expect(page.locator('.error')).toContainText(/(username|email) and password could not be verified/i);`
- **Utilizar fixtures ou hooks** – Para garantir que o usuário esteja autenticado (no teste de telefone) antes de prosseguir.
- **Documentar mudanças** – Se a aplicação alterou a mensagem de erro, registre essa mudança no backlog ou na wiki de testes.
- **Revisão de código** – Peça aos desenvolvedores que atualizem os testes quando as mensagens de UI mudarem.

---

### Resultado final

| Teste | Status após correções | Observação |
|-------|-----------------------|------------|
| Login inválido | ✅ | Mensagem de erro atualizada e verificação de visibilidade adicionada. |
| Atualizar telefone | ✅ | Seletor corrigido, submissão de formulário garantida e timeout ampliado. |

Implementando essas alterações, os testes ficarão alinhados com o comportamento real da aplicação e a probabilidade de falsos negativos diminuirá significativamente.