## 1. Testes que falharam  
| N.º | Descrição do teste | Registro de falha |
|----|--------------------|-------------------|
| 1 | **Login inválido falhou** | `2026-01-12T17:11:10.221Z - Login inválido falhou` |
| 2 | **Usuário deve atualizar telefone com campo vazio falhou** | `2026-01-12T17:11:11.412Z - Usuário deve atualizar telefone com campo vazio falhou` |

---

## 2. Motivos das falhas  

### Teste 1 – Login inválido falhou  
- **Esperado**: o elemento com a classe `.error` deve conter a substring:  
  ```
  "An internal error has occurred and has been logged."
  ```  
- **Recebido**: o elemento `<p class="error">The username and password could not be verified.</p>` foi encontrado, mas a mensagem não corresponde ao texto esperado.  
- **Conclusão**: o texto de erro retornado pela aplicação mudou (ou estava diferente do que o teste pressupõe). O Playwright conseguiu localizar o elemento, mas o conteúdo não bate com a expectativa. O timeout de 5 s acabou porque o texto esperado nunca apareceu.

### Teste 2 – Usuário deve atualizar telefone com campo vazio falhou  
- **Esperado**: o elemento com **id** `phone-error` deve aparecer contendo a mensagem “Phone is required.”.  
- **O que aconteceu**:  
  - O XPath `//*[@id="phone-error"]` não encontrou nenhum elemento dentro dos 5 s.  
  - O log indica que a página não gerou nenhum erro de validação para o campo de telefone ou que o **id** mudou/está em outro elemento.  
- **Conclusão**: o seletor não corresponde a nenhum elemento visível no momento, ou a validação não foi disparada porque o formulário não foi submetido/validado corretamente.

---

## 3. Sugestões de correção

### 3.1. Teste 1 – Login inválido falhou  

| Passo | Ação recomendada | Por que ajuda |
|------|------------------|---------------|
| **a. Verifique a mensagem real** | Abra o aplicativo em ambiente de teste e tente fazer login com credenciais inválidas; copie a mensagem que realmente aparece. | Garante que a expectativa do teste reflita a realidade da aplicação. |
| **b. Atualize a expectativa** | Altere o `expected` para a string correta (ex.: `"The username and password could not be verified."`). | O `toContainText` passará quando o texto coincidir. |
| **c. Considere usar `toHaveText`** | Exemplo: `await expect(locator('.error')).toHaveText(/verified/i);` | `toHaveText` verifica o texto completo, permitindo usar regex para ignorar detalhes que mudam. |
| **d. Ajuste o timeout se necessário** | Caso a mensagem demore a aparecer (ex.: devido a chamadas de API), aumente o timeout (`expect(..., {timeout: 10000})`). | Evita falhas por tempo de espera insuficiente. |
| **e. Adicione `waitForResponse`** | Se o erro depende de uma resposta de backend, aguarde a resposta antes de verificar. | Garante que o erro já tenha sido processado. |

### 3.2. Teste 2 – Usuário deve atualizar telefone com campo vazio falhou  

| Passo | Ação recomendada | Por que ajuda |
|------|------------------|---------------|
| **a. Confirme o seletor** | Verifique no DOM se há algum elemento com `id="phone-error"`. Se não houver, procure pelo elemento que mostra a mensagem (ex.: `<span class="error">Phone is required.</span>`). | Um seletor inválido nunca encontrará o elemento, causando timeout. |
| **b. Use CSS em vez de XPath** | Se o id existir, use `await expect(page.locator('#phone-error')).toContainText('Phone is required.');` | CSS é mais rápido e menos propenso a erros de escrita. |
| **c. Garanta que a validação seja acionada** | - Preencha todos os campos obrigatórios exceto o telefone. <br>- Clique no botão “Salvar” ou “Atualizar”. | A mensagem de erro só aparece depois da submissão. |
| **d. Verifique se a mensagem está visível** | Caso a mensagem exista mas esteja ocultada (`display:none`), use `await expect(...).toBeVisible();` depois de disparar a validação. | Garante que a mensagem seja realmente renderizada no fluxo. |
| **e. Aumente o timeout ou use `waitForSelector`** | Se a mensagem demora a aparecer (por validação assíncrona), use `await page.waitForSelector('#phone-error', {timeout: 8000});`. | Evita falhas por espera curta. |
| **f. Considere usar `text=`** | Se a aplicação usa texto puro sem id, teste com `await expect(page.locator('text=Phone is required.')).toBeVisible();`. | Elimina dependências de atributos que podem mudar. |

### 3.3. Boas práticas gerais

1. **Mensagens de erro em testes**  
   - Se o texto pode variar (ex.: “The username and password could not be verified.” vs “Login failed.”), use *expressões regulares* ou *substring* que não dependam de detalhes exatos.  
   - Exemplo: `await expect(locator('.error')).toContainText(/verified/i);`

2. **Selectors estáveis**  
   - Prefira **data‑attributes** (`data-test-id`) que não mudam com alterações de estilo ou estrutura.  
   - Exemplo: `page.locator('[data-test-id="phone-error"]')`.

3. **Logs e relatórios**  
   - Inclua `console.log` antes de cada expectativa para registrar o texto atual do elemento.  
   - Isso facilita a depuração quando o teste falhar.  

4. **Revisão de código**  
   - Se a aplicação está em constante evolução, mantenha os testes sincronizados com as mensagens de UI.  
   - Automatize a verificação de mensagens de erro via um arquivo de traduções/strings.  

---

## Resumo rápido

| Teste | Falha | Por quê | Solução sugerida |
|-------|-------|---------|-----------------|
| Login inválido | Texto de erro diferente | Mensagem mudou | Atualizar `expected` ou usar regex |
| Atualizar telefone | Seletor inválido / validação não disparada | Elemento não encontrado | Confirmar seletor, disparar validação, usar CSS ou `text=` |

Ajustando as expectativas e os seletores conforme acima, os testes devem passar com maior estabilidade e menos manutenção no futuro. Boa sorte!